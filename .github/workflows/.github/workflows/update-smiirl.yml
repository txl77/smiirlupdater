name: Update Smiirl Counter
on: schedule: - cron: '0 10 * * ' workflow_dispatch:
jobs: update: runs-on: ubuntu-latest steps: - name: Install Playwright run: npm install playwright
name: Install browser run: npx playwright install chromium
name: Get followers and update npoint run: | node << 'EOF' const { chromium } = require('playwright');
(async () => { const browser = await chromium.launch(); const page = await browser.newPage();
        await page.goto('https://www.instagram.com/uefrance/');
        await page.waitForTimeout(5000);
        const content = await page.content();
        const match = content.match(/"edge_followed_by":\{"count":(\d+)\}/);
        if (match) {
          const followers = parseInt(match[1]);
          console.log('Followers found:', followers);
          const response = await fetch('https://api.npoint.io/5c1ef38596efbfb2bfe9', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({number: followers})
          });
          console.log('npoint updated!');
        } else {
          console.log('Could not find follower count');
          process.exit(1);
        }
        await browser.close();
      })();
      EOF
