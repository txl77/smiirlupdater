name: Update Smiirl Counter
on: schedule: - cron: '0 10 * * ' # 11am Paris time (10am UTC) workflow_dispatch: # Allows manual trigger for testing
jobs: update: runs-on: ubuntu-latest steps: - name: Install dependencies run: npm install playwright
name: Get followers and update npoint run: | npx playwright install chromium node -e " const { chromium } = require('playwright'); (async () => { const browser = await chromium.launch(); const page = await browser.newPage(); await page.goto('https://www.instagram.com/uefrance/'); await page.waitForTimeout(3000); const content = await page.content(); const match = content.match(/"edge_followed_by":{"count":(\d+)}/); if (match) { const followers = match[1]; console.log('Followers:', followers); await fetch('https://api.npoint.io/5c1ef38596efbfb2bfe9', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({number: parseInt(followers)}) }); console.log('Updated npoint!'); } else { console.log('Could not find follower count'); } await browser.close(); })(); "
